{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?bd14","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?e095","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?cfa0","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?5b83","uni-app:///pages/index/index.vue","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?2df7","webpack:///C:/Users/10721/Desktop/app/pages/index/index.vue?ed54"],"names":["createPage","Page"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t\t<view class=\"top-bar\">\r\n\t\t\t<view class=\"top-bar-left\">\r\n\t\t\t\t<image :src=\"imgurl\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"top-bar-center\">\r\n\t\t\t\t<image src=\"../../static/logo-npm.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"top-bar-right\">\r\n\t\t\t\t<view class=\"search\" @click=\"searchFriend()\">\r\n\t\t\t\t\t<image src=\"../../static/search.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"add\" @tap=\"buildgroup()\">\r\n\t\t\t\t\t<image src=\"../../static/add.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"main\">\r\n\t\t\t<navigator url=\"../chatman/chatman\">\r\n\t\t\t<view class=\"friend-list\">\r\n\t\t\t\t<view class=\"list-left\">\r\n\t\t\t\t\t<image src=\"../../static/chatMan.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list-right\">\r\n\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t抽抽\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"time\" style=\"visibility: hidden;\">\r\n\t\t\t\t\t\t\t11\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom\">来和我聊天吧</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t</navigator>\r\n\t\t</view>\r\n\t\t<view class=\"chat-main\" v-if=\"friendList\">\r\n\t\t\t<view class=\"friend-require\" v-if=\"requestData>0\" @tap=\"requestPage()\">\r\n\t\t\t\t<view class=\"list-left\">\r\n\t\t\t\t\t<image src=\"../../static/friend-require.png\"></image>\r\n\t\t\t\t\t<view class=\"message\">{{requestData}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list-right\">\r\n\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t好友请求\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t\t\t{{requestTime}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom\">有好友请求，点击看看</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"friend-list\" v-for=\"(item,index) in datalist\" :key=\"index\" @tap=\"updateMsg(item)\">\r\n\t\t\t\t<view class=\"list-left\">\r\n\t\t\t\t\t<image :src=\"item.imgurl\"></image>\r\n\t\t\t\t\t<view class=\"message\" v-if=\"item.tip>0\">{{item.tip}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"list-right\">\r\n\t\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t\t<view class=\"name\">\r\n\t\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"time\">\r\n\t\t\t\t\t\t\t{{item.lastTime}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"bottom\">{{item.msg}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"noOne\" v-if=\"!friendList\">\r\n\t\t\t<image src=\"../../static/noOne.png\"></image>\r\n\t\t\t<text>一个能撩的都没有</text>\r\n\t\t\t<view class=\"sear_btn\" @click=\"searchFriend()\">去撩一个</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport data from \"../../commons/data.js\"\r\n\timport {\r\n\t\tdateTime\r\n\t} from \"../../commons/js/myfun.js\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdatalist: [],\r\n\t\t\t\tuid: \"\",\r\n\t\t\t\timgurl: \"\",\r\n\t\t\t\ttoken: \"\",\r\n\t\t\t\tname: \"\",\r\n\t\t\t\trequestData: 0,\r\n\t\t\t\trequestTime: \"\",\r\n\t\t\t\tfriendList: 0,\r\n\t\t\t\ttip:0\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(){\r\n\t\t\tthis.getstorage()\r\n\t\t\t// this.getfriend()\r\n\t\t\t// this.getapply()\r\n\t\t\t// uni.startPullDownRefresh();\r\n\t\t\t// this.join(this.uid)\r\n\t\t\t// this.receiveSocketMsg()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getstorage()\r\n\t\t\tthis.getfriend()\r\n\t\t\tthis.getapply()\r\n\t\t\t// uni.startPullDownRefresh();\r\n\t\t\tthis.join(this.uid)\r\n\t\t\tthis.receiveSocketMsg()\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.getstorage()\r\n\t\t\tthis.getfriend()\r\n\t\t\tthis.getapply()\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tjoin(uid){\r\n\t\t\t\tthis.socket.emit(\"login\",uid)\r\n\t\t\t},\r\n\t\t\tgetstorage() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst value = uni.getStorageSync('user');\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.uid = value.id,\r\n\t\t\t\t\t\t\tthis.imgurl = this.serverUrl +value.imgurl,\r\n\t\t\t\t\t\t\tthis.token = value.token,\r\n\t\t\t\t\t\t\tthis.name = value.name\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"取值失败\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//获取好友\r\n\t\t\tgetfriend() {\r\n\t\t\t\tthis.tip=0\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/getfriend\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\tstate: 0,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.datalist = res.data.result\r\n\t\t\t\t\t\tconsole.log(this.datalist)\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\tif (res.data.result.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.friendList = 1\r\n\t\t\t\t\t\t\t\tthis.requestTime = dateTime(res.data.result[0].lastTime)\r\n\t\t\t\t\t\t\t\tres.data.result.forEach((item, index) => {\r\n\t\t\t\t\t\t\t\t\titem.imgurl = this.serverUrl + item.imgurl,\r\n\t\t\t\t\t\t\t\t\titem.lastTime = dateTime(item.lastTime)\r\n\t\t\t\t\t\t\t\t\tthis.getMsg(res.data.result, index)\r\n\t\t\t\t\t\t\t\t\tthis.getunreadMsg(res.data.result, index)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\t\t\t\tif(this.tip>0){\r\n\t\t\t\t\t\t\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\t\t\t\t\t\t  index: 0,\r\n\t\t\t\t\t\t\t\t\t\t  text: String(this.tip)\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},100)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (res.data.status == 500) {\r\n\t\t\t\t\t\t\tmui.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 300) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取留言\r\n\t\t\tgetMsg(arr, i) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/getlastmsg\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfid: arr[i].id,\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\t\tlet resData = res.data.result\r\n\t\t\t\t\t\t\tif (resData.types == 0) {\r\n\t\t\t\t\t\t\t\t//文字\r\n\t\t\t\t\t\t\t} else if (resData.types == 1) {\r\n\t\t\t\t\t\t\t\tresData.message = \"[图片]\"\r\n\t\t\t\t\t\t\t} else if (resData.types == 2) {\r\n\t\t\t\t\t\t\t\tresData.message = \"[语音]\"\r\n\t\t\t\t\t\t\t} else if (resData.types == 3) {\r\n\t\t\t\t\t\t\t\tresData.message = \"[位置]\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tarr[i].msg = resData.message\r\n\t\t\t\t\t\t\tarr.splice(i, 1, arr[i])\r\n\t\t\t\t\t\t} else if (res.data.status == 500) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 300) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取申请记录\r\n\t\t\tgetapply() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/getfriend\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\tstate: 1,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\tthis.requestData = res.data.result.length;\r\n\t\t\t\t\t\t\tif (res.data.result.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.friendList = 1\r\n\t\t\t\t\t\t\t\tthis.requestTime = dateTime(res.data.result[0].lastTime)\r\n\t\t\t\t\t\t\t\tres.data.result.forEach(item => {\r\n\t\t\t\t\t\t\t\t\tif (this.requestTime < item.lastTime) {\r\n\t\t\t\t\t\t\t\t\t\tthis.requestTime = dateTime(item.lastTime)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取消息未读数\r\n\t\t\tgetunreadMsg(arr, i) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/unreadmsg\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfid: arr[i].id,\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\tlet resData = res.data.result\r\n\t\t\t\t\t\t\tarr[i].tip = resData\r\n\t\t\t\t\t\t\tthis.tip=this.tip+resData\r\n\t\t\t\t\t\t\tarr.splice(i, 1, arr[i])\r\n\t\t\t\t\t\t} else if (res.data.status == 500) {\r\n\t\t\t\t\t\t\tmui.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 300) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//已读\r\n\t\t\tupdateMsg(data) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/updatemsg\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfid: data.id,\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl:\"../chatroom/chatroom?id=\"+data.id+\"&img=\"+data.imgurl+\"&name=\"+data.name\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 500) {\r\n\t\t\t\t\t\t\tmui.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 300) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\treceiveSocketMsg(){\r\n\t\t\t\tthis.socket.on('msg',(msg,fromid)=>{\r\n\t\t\t\t\t// console.log(msg)\r\n\t\t\t\t\tlet nmsg = ''\r\n\t\t\t\t\tif(msg.types==0){\r\n\t\t\t\t\t\tnmsg=msg.message\r\n\t\t\t\t\t}else if(msg.types==1){\r\n\t\t\t\t\t\tnmsg = '[图片]'\r\n\t\t\t\t\t}else if(msg.types==2){\r\n\t\t\t\t\t\tnmsg = '[音频]'\r\n\t\t\t\t\t}else if(msg.types==3){\r\n\t\t\t\t\t\tnmsg = '[位置]'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(let i=0;i<this.datalist.length;i++){\r\n\t\t\t\t\t\tif(this.datalist[i].id==fromid){\r\n\t\t\t\t\t\t\tlet e = this.datalist[i]\r\n\t\t\t\t\t\t\te.lastTime = dateTime(new Date())\r\n\t\t\t\t\t\t\te.msg = nmsg\r\n\t\t\t\t\t\t\te.tip++\r\n\t\t\t\t\t\t\tthis.tip++\r\n\t\t\t\t\t\t\tthis.datalist.splice(i,1)\r\n\t\t\t\t\t\t\tthis.datalist.unshift(e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\t  index: 0,\r\n\t\t\t\t\t  text: String(this.tip)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trequestPage() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"../request/request\"\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsearchFriend() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../search/search',\r\n\t\t\t\t\tanimationType: 'slide-in-right',\r\n\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbuildgroup(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../buildgroup/buildgroup?userId='+this.uid+\"&username=\"+this.name,\r\n\t\t\t\t\tanimationType: 'slide-in-right',\r\n\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.top-bar {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\twidth: 100%;\r\n\t\theight: 150rpx;\r\n\t\tpadding-right: 50rpx;\r\n\t\tpadding-left: 32rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: $uni-bg-color;\r\n\t\tbox-shadow: 0px 1px 0px 0px rgba(0, 0, 0, 0.1);\r\n\t\toverflow: hidden;\r\n\t\tz-index: 1;\r\n\t\tpadding-top: var(--status-bar-height);\r\n\r\n\t\t.top-bar-left {\r\n\t\t\twidth: 68rpx;\r\n\t\t}\r\n\r\n\t\t.top-bar-left image {\r\n\t\t\twidth: 88rpx;\r\n\t\t\theight: 88rpx;\r\n\t\t\tborder-radius: 16rpx;\r\n\r\n\t\t}\r\n\r\n\t\t.top-bar-center {\r\n\t\t\tflex: 1;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\r\n\t\t.top-bar-center image {\r\n\t\t\twidth: 250rpx;\r\n\t\t\theight: 80rpx;\r\n\t\t\tmargin: 0 auto;\r\n\t\t}\r\n\r\n\t\t.top-bar-right {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\twidth: 140rpx;\r\n\r\n\t\t\t.search {\r\n\t\t\t\twidth: 52rpx;\r\n\t\t\t\theight: 52rpx;\r\n\t\t\t\tmargin-right: 40rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 52rpx;\r\n\t\t\t\t\theight: 52rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.add {\r\n\t\t\t\twidth: 48rpx;\r\n\t\t\t\theight: 48rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 52rpx;\r\n\t\t\t\t\theight: 52rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.chat-main{\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t.main {\r\n\t\tmargin-top: 150rpx;\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t\t.friend-list,\r\n\t\t.friend-require {\r\n\t\t\tpadding: 20rpx 5rpx 10rpx 32rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\t// height: 96rpx;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t&:active {\r\n\t\t\t\tbackground: #F3F4F6;\r\n\t\t\t}\r\n\r\n\t\t\t.list-left {\r\n\t\t\t\tfloat: left;\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 96rpx;\r\n\t\t\t\t\theight: 96rpx;\r\n\t\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.message {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\tcolor: #FFFFFF;\r\n\t\t\t\t\tbackground: #FF5D5B;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\ttop: -12rpx;\r\n\t\t\t\t\tleft: 70rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.list-right {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tfloat: left;\r\n\t\t\t\tpadding-left: 24rpx;\r\n\r\n\t\t\t\t.top {\r\n\t\t\t\t\t.name {\r\n\t\t\t\t\t\tfloat: left;\r\n\t\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\t\tcolor: #272832;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.time {\r\n\t\t\t\t\t\tfloat: right;\r\n\t\t\t\t\t\tpadding-right: 44rpx;\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tcolor: rgba(39, 40, 50, 0.40);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.bottom {\r\n\t\t\t\t\twidth: 80%;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: rgba(39, 40, 50, 0.60);\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t\t-webkit-line-clamp: 1;\r\n\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t// }\r\n\r\n\t.noOne {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tfont: 14rpx;\r\n\t\tcolor: rgba(39, 40, 50, 0.60);\r\n\r\n\t\ttext {\r\n\t\t\tpadding: 50rpx;\r\n\t\t}\r\n\r\n\t\timage {\r\n\t\t\twidth: 158rpx;\r\n\t\t\theight: 250rpx;\r\n\t\t\tpadding-top: 300rpx;\r\n\t\t}\r\n\r\n\t\t.sear_btn {\r\n\t\t\ttext-align: center;\r\n\t\t\tline-height: 96rpx;\r\n\t\t\twidth: 240rpx;\r\n\t\t\theight: 96rpx;\r\n\t\t\tbackground: #5EA9C9;\r\n\t\t\tborder-radius: 24rpx;\r\n\t\t\tbox-shadow: 0 26px 18px -16px\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604969379062\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}