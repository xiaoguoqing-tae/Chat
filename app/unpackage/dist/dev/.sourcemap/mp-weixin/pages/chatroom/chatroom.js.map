{"version":3,"sources":["webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?42f6","webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?0c8c","webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?419c","webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?58de","uni-app:///components/submit/submit.vue","webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?6448","webpack:///C:/Users/10721/Desktop/app/components/submit/submit.vue?2cea","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?f66d","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?b2dc","uni-app:///main.js","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?b2f8","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?547b","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?de77","webpack:///C:/Users/10721/Desktop/app/pages/chatroom/chatroom.vue?b05c","uni-app:///pages/chatroom/chatroom.vue"],"names":["createPage","Page"],"mappings":"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BALA,EAFA,EASA,cATA,EAUA,iCACA,8BACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAFA,MAEA;AACA;AACA;AACA;AACA;AACA,aAFA;AAGA,WA1CA,MA0CA;AACA;AACA,4BADA;AAEA,0BAFA;AAGA,4BAHA;;AAKA,WANA,MAMA;AACA;AACA,mCADA;;AAGA;AACA,SAjEA;;AAmEA,KA7FA;AA8FA,WA9FA,mBA8FA,IA9FA,EA8FA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA;;AAIA,KArHA;AAsHA,YAtHA,sBAsHA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA,OALA,MAKA;AACA;AACA;AACA,KA/HA;AAgIA,WAhIA,mBAgIA,CAhIA,EAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,8BAFA;AAGA;AACA,2CADA;AAEA;AACA;AACA,WAJA;AAKA;AACA;AACA,WAPA,EAHA;;;AAaA,KArJA;AAsJA,aAtJA,qBAsJA,CAtJA,EAsJA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAHA;AAIA,KA9JA;AA+JA,UA/JA,kBA+JA,CA/JA,EA+JA;AACA;AACA,KAjKA;AAkKA,cAlKA,sBAkKA,CAlKA,EAkKA,EAlKA,EAkKA,GAlKA,EAkKA,GAlKA,EAkKA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA,+CADA;AAEA,6BAFA;AAGA,sBAHA;AAIA;AACA,oBADA;AAEA,iFAFA,EAJA;;AAQA;AACA;AACA;AACA,yCADA;AAEA,sBAFA;;AAIA;AACA,WAfA;;AAiBA,OApBA,MAoBA;AACA;AACA;AACA,+CADA;AAEA,2BAFA;AAGA,sBAHA;AAIA;AACA,oBADA;AAEA,iFAFA,EAJA;;AAQA;AACA;AACA;AACA,yCADA;AAEA,sBAFA;;AAIA;AACA,WAfA;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,mBAFA;AAGA,0BAHA;AAIA,sBAJA;AAKA,kBALA;AAMA,oBANA;AAOA,eAPA;;AASA;AACA;AACA;AACA;AACA,OAFA;AAGA,KArOA;AAsOA;AACA,aAvOA,uBAuOA;AACA;AACA,gDADA;AAEA,sBAFA;AAGA;AACA,uBADA;AAEA,uBAFA;AAGA,2BAHA,EAHA;;AAQA;AACA;;AAEA,WAFA,MAEA;AACA;AACA,4BADA;AAEA,0BAFA;;AAIA,WALA,MAKA;AACA;AACA,mCADA;;AAGA;AACA,SArBA;;AAuBA,KA/PA;AAgQA,oBAhQA,8BAgQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,0BADA;AAEA,+BAFA;AAGA,gCAHA;AAIA,4BAJA;AAKA,yBALA;AAMA,mBANA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;AAGA;AACA,OA3BA;AA4BA,KA7RA;AA8RA,cA9RA,wBA8RA;AACA;AACA,2EADA;;AAGA,KAlSA;AAmSA,cAnSA,sBAmSA,CAnSA,EAmSA;AACA;AACA,KArSA;AAsSA,WAtSA,mBAsSA,CAtSA,EAsSA;AACA;AACA;AACA;AACA,KA1SA;AA2SA,aA3SA,uBA2SA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA,OAFA;AAGA,KAlTA,EAhCA,E","file":"pages/chatroom/chatroom.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./submit.vue?vue&type=template&id=36098544&\"\nvar renderjs\nimport script from \"./submit.vue?vue&type=script&lang=js&\"\nexport * from \"./submit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./submit.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/submit/submit.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./submit.vue?vue&type=template&id=36098544&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./submit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./submit.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"submit\">\r\n\t\t\t<view class=\"submit-chat\">\r\n\t\t\t\t<view class=\"bt-img\" @tap=\"change\">\r\n\t\t\t\t\t<image :src=\"record_img\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<textarea auto-height=\"true\" class=\"chat-send btn\" :class=\"{displaynone:isrecord}\"  @input=\"inputs\" v-model=\"inputValue\"\r\n\t\t\t\t @focus=\"closeEmoji\"></textarea>\r\n\t\t\t\t<view class=\"record btn\" :class=\"{displaynone:!isrecord}\"  @touchstart=\"touchstart\" @touchend=\"touchend\" @touchmove=\"touchmove\">按住说话</view>\r\n\t\t\t\t<view class=\"bt-img\" @tap=\"emoji\">\r\n\t\t\t\t\t<image src=\"../../static/biaoqing.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"bt-img\" :class=\"{displaynone:!issend}\" @tap=\"sendMsg\">\r\n\t\t\t\t\t<view class=\"send-btn\">发送</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"bt-img\" :class=\"{displaynone:issend}\" @tap=\"showMore\">\r\n\t\t\t\t\t<image src=\"../../static/add.png\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"emoji\" :class=\"{displaynone:isemoji}\">\r\n\t\t\t\t<emoji @emojiTo=\"emojiTo\" :height=\"200\"></emoji>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"more\" v-if=\"ismore\">\r\n\t\t\t\t<view class=\"more-list\">\r\n\t\t\t\t\t<view class=\"more-item\" @tap=\"chooseImg('album')\">\r\n\t\t\t\t\t\t<image src=\"../../static/src_img.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>照片</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-list\">\r\n\t\t\t\t\t<view class=\"more-item\" @tap=\"chooseImg('camera')\">\r\n\t\t\t\t\t\t<image src=\"../../static/src_camara.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>拍照</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-list\" @tap=\"chooseLocation()\">\r\n\t\t\t\t\t<view class=\"more-item\">\r\n\t\t\t\t\t\t<image src=\"../../static/src_location.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>定位</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-list\">\r\n\t\t\t\t\t<view class=\"more-item\">\r\n\t\t\t\t\t\t<image src=\"../../static/src_video.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>视频</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"more-list\">\r\n\t\t\t\t\t<view class=\"more-item\">\r\n\t\t\t\t\t\t<image src=\"../../static/src_wj.png\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text>文件</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"mask\" v-if=\"istime\">\r\n\t\t\t<view class=\"time_second\">{{vlength}}</view>\r\n\t\t\t<image src=\"../../static/timg.gif\"></image>\r\n\t\t\t<view class=\"cancel\">上划取消</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport emoji from \"./emoji/emoji.vue\"\r\n\tconst recorderManager = uni.getRecorderManager();\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisrecord: false,\r\n\t\t\t\trecord_img: \"../../static/keybord.png\",\r\n\t\t\t\tisemoji: true,\r\n\t\t\t\tissend: false,\r\n\t\t\t\tinputValue: \"\",\r\n\t\t\t\tismore: false,\r\n\t\t\t\ttime: \"\",\r\n\t\t\t\tvlength: 0,\r\n\t\t\t\tistime:false,\r\n\t\t\t\tpageY:\"\",\r\n\t\t\t\tuimgurl:\"\",\r\n\t\t\t\tuname:\"\"\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\temoji\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getstorage()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetstorage() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst value = uni.getStorageSync('user');\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.uimgurl = value.imgurl\r\n\t\t\t\t\t\tthis.uname = value.name\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"取值失败\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetHeight() {\r\n\t\t\t\tconst query = uni.createSelectorQuery().in(this);\r\n\t\t\t\tquery.select('.submit').boundingClientRect(data => {\r\n\t\t\t\t\tthis.$emit(\"heights\", data.height)\r\n\t\t\t\t}).exec();\r\n\t\t\t},\r\n\t\t\tchange() {\r\n\t\t\t\tthis.ismore = false\r\n\t\t\t\tthis.isemoji = true\r\n\t\t\t\tif (!this.isrecord) {\r\n\t\t\t\t\tthis.isrecord = true\r\n\t\t\t\t\tthis.record_img = \"../../static/yuyin.png\"\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isrecord = false\r\n\t\t\t\t\tthis.record_img = \"../../static/keybord.png\"\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getHeight()\r\n\t\t\t\t}, 20)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tshowMore() {\r\n\t\t\t\tthis.isemoji = true\r\n\t\t\t\tthis.ismore = !this.ismore\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getHeight()\r\n\t\t\t\t}, 20)\r\n\t\t\t},\r\n\t\t\temoji() {\r\n\t\t\t\tthis.ismore = false\r\n\t\t\t\tthis.isemoji = !this.isemoji\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getHeight()\r\n\t\t\t\t}, 20)\r\n\t\t\t},\r\n\t\t\temojiTo(e) {\r\n\t\t\t\tconsole.log(e)\r\n\t\t\t\tthis.issend=true\r\n\t\t\t\tthis.inputValue = this.inputValue + e\r\n\t\t\t},\r\n\t\t\t//音频操作\r\n\t\t\ttouchstart(e) {\r\n\t\t\t\tthis.pageY = e.changedTouches[0].pageY\r\n\t\t\t\tlet i = 1\r\n\t\t\t\tthis.time = setInterval(() => {\r\n\t\t\t\t\tthis.vlength = i\r\n\t\t\t\t\ti++\r\n\t\t\t\t\tif (i > 60) {\r\n\t\t\t\t\t\tclearInterval(this.time)\r\n\t\t\t\t\t\tthis.touchend()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.istime=true\r\n\t\t\t\t\tconsole.log(i)\r\n\t\t\t\t}, 1000)\r\n\t\t\t\trecorderManager.start();\r\n\t\t\t},\r\n\t\t\ttouchend() {\r\n\t\t\t\tclearInterval(this.time)\r\n\t\t\t\tlet self = this;\r\n\t\t\t\trecorderManager.onStop((res)=> {\r\n\t\t\t\t\tconsole.log('recorder stop' + JSON.stringify(res));\r\n\t\t\t\t\tself.voicePath = res.tempFilePath;\r\n\t\t\t\t\t\tlet message = {\r\n\t\t\t\t\t\t\tvoice:self.voicePath,\r\n\t\t\t\t\t\t\tsecond:self.vlength\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(self.istime==true){\r\n\t\t\t\t\t\tif(self.vlength!=0){\r\n\t\t\t\t\t\t\tself.send(message,2)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:\"消息时间过短\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t\tself.vlength=0\r\n\t\t\t\t\tself.istime=false\r\n\t\t\t\t});\r\n\t\t\t\trecorderManager.stop();\r\n\t\t\t},\r\n\t\t\ttouchmove(e){\r\n\t\t\t\tif(this.pageY-e.changedTouches[0].pageY>100){\r\n\t\t\t\t\tthis.istime=false\r\n\t\t\t\t}\r\n\t\t\t},\t\r\n\t\t\tchooseLocation(){\r\n\t\t\t\tuni.chooseLocation({\r\n\t\t\t\t    success: res=> {\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tname: res.name,\r\n\t\t\t\t\t\t\taddress: res.address,\r\n\t\t\t\t\t\t\tlatitude:res.latitude,\r\n\t\t\t\t\t\t\tlongitude:res.longitude\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\tlet stringData = JSON.stringify(data)\r\n\t\t\t\t\t\tthis.send(stringData,3)\r\n\t\t\t\t    }\t\t\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendMsg() {\r\n\t\t\t\tthis.issend=false\r\n\t\t\t\tthis.send(this.inputValue,0)\r\n\t\t\t},\r\n\t\t\tsend(msg,type){\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\ttypes: type,\r\n\t\t\t\t\timgurl:this.uimgurl,\r\n\t\t\t\t\tname:this.uname\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('inputs',data)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.inputValue = \"\"\r\n\t\t\t\t}, 0)\r\n\t\t\t},\r\n\t\t\tcloseEmoji() {\r\n\t\t\t\tthis.isemoji = true\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.getHeight()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinputs(e) {\r\n\t\t\t\tif (e.detail.value != \"\") {\r\n\t\t\t\t\tthis.issend = true\r\n\t\t\t\t\tthis.inputValue = e.detail.value\r\n\t\t\t\t}else if(e.detail.value.toString().length==0){\r\n\t\t\t\t\tthis.issend = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchooseImg(i) {\r\n\t\t\t\tlet count\r\n\t\t\t\tif (i == \"album\") {\r\n\t\t\t\t\tcount = 9\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcount = 1\r\n\t\t\t\t}\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: count,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: [i], //从相册选择\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconst filePath = res.tempFilePaths\r\n\t\t\t\t\t\tfor (let i = 0; i < filePath.length; i++) {\r\n\t\t\t\t\t\t\tthis.send( filePath[i],1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.submit {\r\n\t\tbackground: rgba(244, 244, 244, 0.96);\r\n\t\tborder-top: 1px solid $uni-border-color;\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tz-index: 100;\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t}\r\n\r\n\t.displaynone {\r\n\t\tdisplay: none;\r\n\t}\r\n\r\n\t.submit-chat {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-end;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 14rpx 14rpx;\r\n\r\n\t\timage {\r\n\t\t\twidth: 56rpx;\r\n\t\t\theight: 56rpx;\r\n\t\t\tmargin: 0 10rpx;\r\n\t\t\tflex: auto;\r\n\t\t}\r\n\r\n\t\t.send-btn {\r\n\t\t\twidth: 100rpx;\r\n\t\t\theight: 56rpx;\r\n\t\t\tmargin: 0 10rpx;\r\n\t\t\tpadding: 10rpx;\r\n\t\t\ttext-align: center;\r\n\t\t\tborder-radius: $uni-border-radius-sm;\r\n\t\t\tflex: auto;\r\n\t\t\tbackground: $uni-color-primary;\r\n\t\t}\r\n\r\n\t\t.btn {\r\n\t\t\tflex: auto;\r\n\t\t\tbackground-color: #FFFFFF;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tmargin: 0 10rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tmax-height: 160rpx;\r\n\t\t}\r\n\r\n\t\t.record {\r\n\t\t\ttext-align: center;\r\n\t\t\tfont-size: $uni-font-size-lg;\r\n\t\t\tcolor: $uni-text-color-grey;\r\n\t\t}\r\n\t}\r\n\r\n\t.emoji {\r\n\t\twidth: 100%;\r\n\t\theight: 400rpx;\r\n\t\tbackground: rgba(244, 244, 244, 0.96);\r\n\t}\r\n\r\n\t.more {\r\n\t\twidth: 100%;\r\n\t\theight: 400rpx;\r\n\t\tbackground: rgba(244, 244, 244, 0.96);\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: space-between;\r\n\r\n\t\t.more-list {\r\n\t\t\twidth: 25%;\r\n\t\t\ttext-align: center;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\r\n\t\t\t.more-item {\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tbackground: #FFFFFF;\r\n\t\t\t\tpadding: 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tborder-radius: 20rpx;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 72rpx;\r\n\t\t\t\t\theight: 72rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.mask{\r\n\t\tposition: fixed;\r\n\t\ttop:0;\r\n\t\tleft:0;\r\n\t\tz-index:99;\r\n\t\twidth:100%;\r\n\t\theight:100vh;\r\n\t\tbackground:#211a4a;\r\n\t\ttext-align: center;\r\n\t\t.time_second{\r\n\t\t\tpadding-top: 600rpx;\r\n\t\t\tfont-size: 100rpx;\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\t\t.cancel{\r\n\t\t\tfont-size: 20rpx;\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./submit.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./submit.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604969379475\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1604969379400\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/chatroom/chatroom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatroom.vue?vue&type=template&id=4748afe6&\"\nvar renderjs\nimport script from \"./chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatroom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chatroom/chatroom.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=template&id=4748afe6&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"content\">\r\n\t\t<view class=\"head\">\r\n\t\t\t{{fname}}\r\n\t\t\t<image class=\"left\" src=\"../../static/fanhui.png\" @tap=\"navback\"></image>\r\n\t\t\t<!-- <image class=\"right\" src=\"../../static/4.jpg\"></image> -->\r\n\t\t</view>\r\n\t\t<scroll-view class=\"chat\" scroll-y=\"true\" scroll-with-animation=\"true\" :scroll-into-view=\"scrollintoView\" @scrolltoupper=\"nextPage\">\r\n\t\t\t<view class=\"chat-main\" :style=\"{paddingBottom:inputHeight+'px'}\">\r\n\t\t\t\t<view class=\"loading\" v-if=\"loading\">\r\n\t\t\t\t\t<image src=\"../../static/loading.gif\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"chat-ls\" v-for=\"(item,index) in msg\" :key=\"index\" :id=\"'msg'+item.id\">\r\n\t\t\t\t\t<view class=\"chat-time\" v-if=\"item.Ntime !=''\">{{item.time}}</view>\r\n\t\t\t\t\t<view class=\"msg-m msg-left\" v-if=\"item.fromId!=uid\">\r\n\t\t\t\t\t\t<image :src=\"item.imgurl\" class=\"user-img\" @tap=\"friendInfo()\"></image>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='0'\">\r\n\t\t\t\t\t\t\t<view class=\"msg-text\">{{item.message}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='1'\">\r\n\t\t\t\t\t\t\t<image :src=\"item.message\" class=\"msg-img\" mode=\"widthFix\" @tap=\"preview(item.message)\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='2'\">\r\n\t\t\t\t\t\t\t<view class=\"msg-text voice\" :style=\"{width:item.message.second*3+'px'}\" @tap=\"playVoice(item.message.voice)\">\r\n\t\t\t\t\t\t\t\t<image src=\"../../static/voice.png\"></image>\r\n\t\t\t\t\t\t\t\t<text>{{item.message.second}}\"</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message-map\" v-if=\"item.types=='3'\">\r\n\t\t\t\t\t\t\t<view class=\"map\">\r\n\t\t\t\t\t\t\t\t<view class=\"map-name\">{{item.message.name}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"map-location\">{{item.message.address}}</view>\r\n\t\t\t\t\t\t\t\t<image src=\"../../static/unnamed.jpg\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\t\r\n\t\t\t\t\t<view class=\"msg-m msg-right\" v-if=\"item.fromId==uid\">\r\n\t\t\t\t\t\t<image :src=\"item.imgurl\" class=\"user-img\"></image>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='0'\">\r\n\t\t\t\t\t\t\t<view class=\"msg-text\">{{item.message}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='1'\">\r\n\t\t\t\t\t\t\t<image :src=\"item.message\" class=\"msg-img\" mode=\"widthFix\" @tap=\"preview(item.message)\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message\" v-if=\"item.types=='2'\">\r\n\t\t\t\t\t\t\t<view class=\"msg-text voice\" :style=\"{width:item.message.second*3.5+'px'}\" @tap=\"playVoice(item.message.voice)\">\r\n\t\t\t\t\t\t\t\t<image src=\"../../static/voice.png\"></image>\r\n\t\t\t\t\t\t\t\t<text>{{item.message.second}}\"</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"message-map\" v-if=\"item.types=='3'\">\r\n\t\t\t\t\t\t\t<view class=\"map\">\r\n\t\t\t\t\t\t\t\t<view class=\"map-name\">{{item.message.name}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"map-location\">{{item.message.address}}</view>\r\n\t\t\t\t\t\t\t\t<image src='../../static/unnamed.jpg'></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t<chatSubmit @inputs=\"inputs\" @heights=\"heights\"></chatSubmit>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {dateTime,fileName,formatDateTime,spaceTime} from \"../../commons/js/myfun.js\"\r\n\timport datas from \"../../commons/data.js\"\r\n\timport chatSubmit from \"../../components/submit/submit.vue\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tmsg: [],\r\n\t\t\t\tmsg0:[],\r\n\t\t\t\tscrollintoView: \"\",\r\n\t\t\t\tpreviewList:[],\r\n\t\t\t\tinputHeight:\"60\",\r\n\t\t\t\tuname:\"\",\r\n\t\t\t\tuid:\"\",\r\n\t\t\t\tuimgurl:\"\",\r\n\t\t\t\tfname:\"\",\r\n\t\t\t\tfimg:\"\",\r\n\t\t\t\tfid:\"\",\r\n\t\t\t\tnowpage:0,\r\n\t\t\t\tpageSize:10,\r\n\t\t\t\tloading:false,\r\n\t\t\t\ttoken:\"\",\r\n\t\t\t\toldTime:new Date()\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tchatSubmit\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.getstorage()\r\n\t\t\tthis.fid = e.id\r\n\t\t\tthis.fname = e.name\r\n\t\t\tthis.fimg = e.img\r\n\t\t\tthis.getMsg()\r\n\t\t\tthis.receiveSocketMsg()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetstorage() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst value = uni.getStorageSync('user');\r\n\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\tthis.uid = value.id,\r\n\t\t\t\t\t\tthis.uimgurl = this.serverUrl + value.imgurl,\r\n\t\t\t\t\t\tthis.token = value.token,\r\n\t\t\t\t\t\tthis.uname = value.name\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"取值失败\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnavback(){\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl:\"../index/index\",\r\n\t\t\t\t\t// success(e) {\r\n\t\t\t\t\t//     var page = getCurrentPages().pop();\r\n\t\t\t\t\t// \tconsole.log(page)\r\n\t\t\t\t\t//     if (page == undefined || page == null) return;\r\n\t\t\t\t\t//     page.onLoad();\r\n\t\t\t\t\t// }\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetMsg(page) {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.serverUrl+\"/chat/msg\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tuid:this.uid,\r\n\t\t\t\t\t\tfid:this.fid,\r\n\t\t\t\t\t\tnowPage:this.nowpage,\r\n\t\t\t\t\t\tpageSize:this.pageSize,\r\n\t\t\t\t\t\ttoken:this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tsuccess:(data)=> {\r\n\t\t\t\t\t\tlet status = data.data.status\r\n\t\t\t\t\t\tif(status==200){\r\n\t\t\t\t\t\t\tthis.msg0=data.data.result;\r\n\t\t\t\t\t\t\tlet msg = data.data.result;\r\n\t\t\t\t\t\t\tif(msg.length>0){\r\n\t\t\t\t\t\t\t\tlet msgs = []\r\n\t\t\t\t\t\t\t\tfor(var i=msg.length-1;i>=0;i--){\r\n\t\t\t\t\t\t\t\t\tlet t = spaceTime(this.oldTime,msg[i].time)\r\n\t\t\t\t\t\t\t\t\tif(t!=\"\"){\r\n\t\t\t\t\t\t\t\t\t\tthis.oldTime=t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tmsg[i].Ntime = t\r\n\t\t\t\t\t\t\t\t\tmsg[i].time= dateTime(t)\r\n\t\t\t\t\t\t\t\t\tmsg[i].imgurl = this.serverUrl+msg[i].imgurl;\r\n\t\t\t\t\t\t\t\t\tif (msg[i].types == \"1\") {\r\n\t\t\t\t\t\t\t\t\t\tmsg[i].message = this.serverUrl + msg[i].message\r\n\t\t\t\t\t\t\t\t\t\tthis.previewList.unshift(msg[i].message)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (msg[i].types == \"3\") {\r\n\t\t\t\t\t\t\t\t\t\tmsg[i].message = JSON.parse(msg[i].message)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tmsgs.push(msg[i])\r\n\t\t\t\t\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(this.nowpage>0){\r\n\t\t\t\t\t\t\t\t\tfor(let i=msgs.length-1;i>=0;i--){\r\n\t\t\t\t\t\t\t\t\t\tthis.msg.unshift(msgs[i])\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tfor(let i=0;i<msgs.length;i++){\r\n\t\t\t\t\t\t\t\t\t\tthis.msg.push(msgs[i])\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(this.msg)\r\n\t\t\t\t\t\t\tif(msg.length==10){\r\n\t\t\t\t\t\t\t\tthis.nowpage++\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.nowpage=-1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\t\t\t\tthis.scrollintoView ='msg'+this.msg[msg.length-1].id\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else if(status==500){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:'服务出错了',\r\n\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t\tduration:2000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else if(status == 300){\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetMsg1(page) {\r\n\t\t\t\tlet msg = datas.message()\r\n\t\t\t\tlet maxpages = msg.length\r\n\t\t\t\tif(msg.length>(page+1)*10){\r\n\t\t\t\t\tthis.nowpage++\r\n\t\t\t\t\tmaxpages = (page+1)*10\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.nowpage=-1\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = page*10; i < (page+1)*10; i++) {\r\n\t\t\t\t\tmsg[i].time = dateTime(msg[i].time)\r\n\t\t\t\t\tmsg[i].imgurl = \"../../static/\" + msg[i].imgurl\r\n\t\t\t\t\tif (msg[i].types == \"1\") {\r\n\t\t\t\t\t\tmsg[i].message = \"../../static/\" + msg[i].message\r\n\t\t\t\t\t\tthis.previewList.unshift(msg[i].message)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.msg.unshift(msg[i])\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t} \r\n\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\tthis.scrollintoView ='msg'+this.msg[maxpages-page*10-1].tip\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tnextPage(){\r\n\t\t\t\tif(this.nowpage>-1){\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tthis.getMsg(this.nowpage)\r\n\t\t\t\t\t},1000)\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpreview(e) {\r\n\t\t\t\tlet index\r\n\t\t\t\tfor(let i=0;i<this.previewList.length;i++){\r\n\t\t\t\t\tif(this.previewList[i]==e){\r\n\t\t\t\t\t\tindex=i\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 预览图片\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent:index,\r\n\t\t\t\t\turls: this.previewList,\r\n\t\t\t\t\tlongPressActions: {\r\n\t\t\t\t\t\titemList: ['发送给朋友', '保存图片', '收藏'],\r\n\t\t\t\t\t\tsuccess: function(data) {\r\n\t\t\t\t\t\t\tconsole.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tplayVoice(e){\r\n\t\t\t\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\tinnerAudioContext.autoplay = true;\r\n\t\t\t\tinnerAudioContext.src = e\r\n\t\t\t\tinnerAudioContext.onPlay(() => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('开始播放');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinputs(e){\r\n\t\t\t\tthis.receiveMsg(e,this.uid,this.uimgurl,0)\r\n\t\t\t},\r\n\t\t\treceiveMsg(e,id,img,tip){\r\n\t\t\t\tif(e.types==0 || e.types==3){\r\n\t\t\t\t\tthis.sendsocket(e)\r\n\t\t\t\t}else if(e.types==1){\r\n\t\t\t\t\tthis.previewList.push(e.message)\r\n\t\t\t\t\tvar url = fileName(new Date());\r\n\t\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\t\turl:this.serverUrl+'/files/upload',\r\n\t\t\t\t\t\tfilePath:e.message,\r\n\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\tformData:{\r\n\t\t\t\t\t\t\turl:url,\r\n\t\t\t\t\t\t\tname:new Date().getTime()+this.uid+Math.ceil(Math.random()*10),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess:(UploadFileRes)=>{\r\n\t\t\t\t\t\t\tconsole.log(UploadFileRes)\r\n\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\tmessage:UploadFileRes.data,\r\n\t\t\t\t\t\t\t\ttypes:1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.sendsocket(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(e.types==2){\r\n\t\t\t\t\tvar url = fileName(new Date());\r\n\t\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\t\turl:this.serverUrl+'/files/upload',\r\n\t\t\t\t\t\tfilePath:e.voice,\r\n\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\tformData:{\r\n\t\t\t\t\t\t\turl:url,\r\n\t\t\t\t\t\t\tname:new Date().getTime()+this.uid+Math.ceil(Math.random()*10),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess:(UploadFileRes)=>{\r\n\t\t\t\t\t\t\tconsole.log(UploadFileRes)\r\n\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\tmessage:UploadFileRes.data,\r\n\t\t\t\t\t\t\t\ttypes:2\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.sendsocket(data)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif(e.types==3){\r\n\t\t\t\t\te.message=JSON.parse(e.message)\r\n\t\t\t\t}\r\n\t\t\t\tvar len = this.msg.length\r\n\t\t\t\tlet t = spaceTime(this.oldTime,new Date())\r\n\t\t\t\tif(t!=\"\"){\r\n\t\t\t\t\tthis.oldTime=t\r\n\t\t\t\t}\r\n\t\t\t\tlet Ntime = t\r\n\t\t\t\tlet time= dateTime(t)\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tfromId:id,\r\n\t\t\t\t\timgurl:img,\r\n\t\t\t\t\tmessage:e.message,\r\n\t\t\t\t\ttypes:e.types,\r\n\t\t\t\t\ttime:time,\r\n\t\t\t\t\tNtime:Ntime,\r\n\t\t\t\t\tid:len\r\n\t\t\t\t}\r\n\t\t\t\tthis.msg.push(data)\t\r\n\t\t\t\tconsole.log(this.msg)\r\n\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\tthis.scrollintoView ='msg'+this.msg[len].id\r\n\t\t\t\t})\t\r\n\t\t\t},\r\n\t\t\t//已读\r\n\t\t\tupdateMsg() {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.serverUrl + \"/index/updatemsg\",\r\n\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfid: this.fid,\r\n\t\t\t\t\t\tuid: this.uid,\r\n\t\t\t\t\t\ttoken: this.token\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.data.status == 200) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else if (res.data.status == 500) {\r\n\t\t\t\t\t\t\tmui.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"服务器错误\",\r\n\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else if (res.data.status == 300) {\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl: \"../login/login\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\treceiveSocketMsg(){\r\n\t\t\t\tthis.socket.on('msg',(msg,fromid,tip)=>{\r\n\t\t\t\t\tthis.updateMsg()\r\n\t\t\t\t\tif(fromid==this.fid && tip==0){\r\n\t\t\t\t\t\tconsole.log(msg)\r\n\t\t\t\t\t\tlet len = this.msg.length;\r\n\t\t\t\t\t\tlet nowTime = dateTime(new Date())\r\n\t\t\t\t\t\tif(msg.types==1 || msg.types==2){\r\n\t\t\t\t\t\t\tmsg.message = this.serverUrl + msg.message\r\n\t\t\t\t\t\t}else if(msg.types==3){\r\n\t\t\t\t\t\t\tmsg.message=JSON.parse(msg.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tfromId:fromid,\r\n\t\t\t\t\t\t\timgurl:this.fimg,\r\n\t\t\t\t\t\t\tmessage:msg.message,\r\n\t\t\t\t\t\t\ttypes:msg.types,\r\n\t\t\t\t\t\t\ttime:nowTime,\r\n\t\t\t\t\t\t\tid:len,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.msg.push(data)\r\n\t\t\t\t\t\tif(msg.types==1){\r\n\t\t\t\t\t\t\tthis.previewList.push(msg.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\t\t\tthis.scrollintoView ='msg'+this.msg[len].id\r\n\t\t\t\t\t\t})\t\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tfriendInfo(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../userhome/userhome?friendId='+this.fid+\"&isfriendNum=1\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsendsocket(e){\r\n\t\t\t\tthis.socket.emit(\"msg\",e,this.uid,this.fid)\r\n\t\t\t},\r\n\t\t\theights(e){\r\n\t\t\t\tthis.inputHeight=e\r\n\t\t\t\tconsole.log(this.inputHeight)\r\n\t\t\t\tthis.getBottom()\r\n\t\t\t},\r\n\t\t\tgetBottom(){\r\n\t\t\t\tthis.scroll_height=\r\n\t\t\t\tthis.scrollintoView=\"\"\r\n\t\t\t\tvar len = this.msg.length-1\r\n\t\t\t\tthis.$nextTick(function(){\r\n\t\t\t\t\tthis.scrollintoView ='msg'+this.msg[len].id\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\theight: 100%;\r\n\t\tbackground: rgba(244, 244, 244, 1);\r\n\t}\r\n\r\n\t.head {\r\n\t\twidth: 100%;\r\n\t\theight: 88rpx;\r\n\t\ttext-align: center;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tz-index: 100;\r\n\t\tline-height: 88rpx;\r\n\t\tborder-bottom: 1px solid $uni-border-color;\r\n\t\tbackground: rgba(244, 244, 244, 0.96);\r\n\t\tpadding-top:  var(--status-bar-height);\r\n\t\t.left {\r\n\t\t\twidth: 48rpx;\r\n\t\t\theight: 48rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 24rpx;\r\n\t\t\tbottom: 20rpx;\r\n\r\n\t\t}\r\n\t\t.right {\r\n\t\t\twidth: 68rpx;\r\n\t\t\theight: 68rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 32rpx;\r\n\t\t\ttop: var(--status-bar-height);\r\n\t\t\tborder-radius: $uni-border-radius-base;\r\n\t\t}\r\n\t}\r\n\t.mask{\r\n\t\tposition: fixed;\r\n\t\ttop:0;\r\n\t\tleft:0;\r\n\t\tz-index:999;\r\n\t\twidth:100%;\r\n\t\theight:100vh;\r\n\t\tbackground:#211a4a;\r\n\t\ttext-align: center;\r\n\t\t.time_second{\r\n\t\t\tpadding-top: 800rpx;\r\n\t\t\tfont-size: 100rpx;\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\t}\r\n\r\n\t.content {\r\n\t\theight: 100%;\r\n\t\t\r\n\t}\r\n\r\n\t.chat {\r\n\t\theight: 100%;\r\n\t\tpadding-top: 80rpx;\r\n\t\t.chat-main {\r\n\t\t\tpadding-left: $uni-spacing-col-base;\r\n\t\t\tpadding-right: $uni-spacing-col-base;\r\n\t\t\t// padding-bottom: 120rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t}\r\n\r\n\t\t.chat-ls {\r\n\t\t\t.chat-time {\r\n\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\tcolor: rgba(39, 40, 50, 0.3);\r\n\t\t\t\tline-height: 34rpx;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t}\r\n\r\n\t\t\t.msg-m {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tpadding: 20rpx 0;\r\n\r\n\t\t\t\t.user-img {\r\n\t\t\t\t\tflex: none;\r\n\t\t\t\t\twidth: $uni-img-size-sm;\r\n\t\t\t\t\theight: $uni-img-size-sm;\r\n\t\t\t\t\tborder-radius: $uni-border-radius-base;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.message {\r\n\t\t\t\t\tmax-width: 480rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.msg-text {\r\n\t\t\t\t\tfont-size: $uni-font-size-lg;\r\n\t\t\t\t\tcolor: $uni-text-color;\r\n\t\t\t\t\tline-height: 44rpx;\r\n\t\t\t\t\tpadding: 16rpx 24rpx;\r\n\t\t\t\t\tword-wrap: break-word;\r\n\t\t\t\t}\r\n\t\t\t\t.voice{\r\n\t\t\t\t\tmin-width: 120rpx;\r\n\t\t\t\t\timage{\r\n\t\t\t\t\t\twidth: 90rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.map{\r\n\t\t\t\t\tbackground: #FFFFFF;\r\n\t\t\t\t\twidth: 550rpx;\r\n\t\t\t\t\t.map-name{\r\n\t\t\t\t\t\tfont-size: $uni-font-size-lg;\r\n\t\t\t\t\t\tcolor: $uni-text-color;\r\n\t\t\t\t\t\tline-height: 44rpx;\r\n\t\t\t\t\t\tpadding: 18rpx 24rpx 0 24rpx;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\tdisplay:-webkit-box; \r\n\t\t\t\t\t\t-webkit-box-orient:vertical; \r\n\t\t\t\t\t\t-webkit-line-clamp:1; \r\n\t\t\t\t\t}\r\n\t\t\t\t\t.map-location{\r\n\t\t\t\t\t\tfont-size: $uni-font-size-sm;\r\n\t\t\t\t\t\tcolor: $uni-text-color-disable;\r\n\t\t\t\t\t\tpadding: 0 24rpx;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t\ttext-overflow: ellipsis;\r\n\t\t\t\t\t\tdisplay:-webkit-box; \r\n\t\t\t\t\t\t-webkit-box-orient:vertical; \r\n\t\t\t\t\t\t-webkit-line-clamp:1; \r\n\t\t\t\t\t}\r\n\t\t\t\t\timage{\r\n\t\t\t\t\t\tpadding: 5rpx;\r\n\t\t\t\t\t\twidth: 550rpx;\r\n\t\t\t\t\t\theight: 300rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.msg-img {\r\n\t\t\t\t\tmax-width: 400rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.msg-left {\r\n\t\t\t\tflex-direction: row;\r\n\r\n\t\t\t\t.msg-text {\r\n\t\t\t\t\tmargin-left: 16rpx;\r\n\t\t\t\t\tbackground-color: #FFFFFF;\r\n\t\t\t\t\tborder-radius: 0 20rpx 20rpx 20rpx;\r\n\t\t\t\t\t;\r\n\t\t\t\t}\r\n\t\t\t\t.voice{\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t}\r\n\t\t\t\t.message-map{\r\n\t\t\t\t\tpadding-left: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.msg-img {\r\n\t\t\t\t\tpadding-left: 16rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.msg-right {\r\n\t\t\t\tflex-direction: row-reverse;\r\n\r\n\t\t\t\t.msg-text {\r\n\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\tbackground-color: #3399FF;\r\n\t\t\t\t\tborder-radius: 20rpx 0 20rpx 20rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.voice{\r\n\t\t\t\t\t\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\tflex-direction: row-reverse;\r\n\t\t\t\t}\r\n\t\t\t\t.message-map{\r\n\t\t\t\t\tpadding-right: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.msg-img {\r\n\t\t\t\t\tpadding-right: 16rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t.loading{\r\n\t\ttext-align: center;\r\n\t\timage{\r\n\t\t\twidth: 60rpx;\r\n\t\t\theight: 60rpx;\r\n\t\t}\r\n\t}\r\n</style>\n"],"sourceRoot":""}